<html>
    <head>
        <title>系统用户</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<LINK rel=stylesheet type=text/css href="/icm/publiccss/pubcss.css">
		<LINK rel=stylesheet type=text/css href="/icm/extjs/resources/css/ext-all.css">
		<link rel="stylesheet" type="text/css" href="/icm/extjs/resources/css/feed-viewer.css" />
		<LINK rel=stylesheet type=text/css href="/icm/extjs/resources/css/xtheme-default.css" id="xthemecss" >
		<script type="text/javascript" src="/icm/extjs/adapter/ext/ext-base.js"></script>
		<SCRIPT type=text/javascript  src="/icm/extjs/ext-all.js"></SCRIPT>
		<script type=text/javascript  src="/icm/publicjs/exportexcel.js"></script>
    <!--<link rel="stylesheet" href="pubcss.css" type="text/css">-->
		<link rel="stylesheet" href="/icm/publiccss/pubcss.css" type="text/css">
		<script language="javascript">
		function msasUpdate()
		{
			  var myonlineRecord=listform.onlineRecord.value;
			  var mysysInfo=listform.sysInfo.value;
			  var myAlertList=listform.AlertList.value;
				 ///////////////////验证开始//////////////////////////////////////////////||mysysInfo==""||myAlertList==""
			  if(myonlineRecord=="")
			  {
					alert("上线记录保存天数输入框不能为空");
					listform.onlineRecord.focus();
					listform.onlineRecord.select(); 
					return false;
			  }
			   for(var i=0;i<myonlineRecord.length;i++)
			   {
				var myChar= myonlineRecord.toLowerCase().charAt(i);	
				 if((!(myChar>='0' && myChar<='9')))
				  { 
					alert("上线记录保存天数必须是正整数！");
					listform.onlineRecord.focus();
					listform.onlineRecord.select(); 
					return false;
				  }
				}
			   if(mysysInfo=="")
			  {
					alert("系统信息报表数据保存天数输入框不能为空");
					listform.sysInfo.focus();
					listform.sysInfo.select(); 
					return false;
			  }
			   for(var i=0;i<mysysInfo.length;i++)
			   {
				var myChar= mysysInfo.toLowerCase().charAt(i);	
				 if((!(myChar>='0' && myChar<='9')))
				  { 
					alert("系统信息报表数据保存天数必须是正整数！");
					listform.sysInfo.focus();
					listform.sysInfo.select(); 
					return false;
				  }
				}
			   if(myAlertList=="")
			  {
					alert("Arp报警列表保存时间输入框不能为空");
					listform.AlertList.focus();
					listform.AlertList.select(); 
					return false;
			  }
			   for(var i=0;i<myAlertList.length;i++)
			   {
				var myChar= myAlertList.toLowerCase().charAt(i);	
				 if((!(myChar>='0' && myChar<='9')))
				  { 
					alert("Arp报警列表保存时间必须是正整数！");
					listform.AlertList.focus();
					listform.AlertList.select(); 
					return false;
				  }
				}
			   ///////////////////验证完毕//////////////////////////////////////////////
				
				 Ext.Ajax.request({
                    method : 'POST', 
                    url:'/icm/main.xp', 
		                success: function(response, options) 
									   {
										  var retxt=response.responseText;//拿到配置时的返回值
										  if(retxt==0)
										   {
										     Ext.MessageBox.alert('提示','配置成功!');
										   }
										   else
										   {
											 Ext.MessageBox.alert('提示',"配置失败!");
										   }
										},
								   failure : function() 
								   {   
									  Ext.MessageBox.alert('提示',"配置户失败!"); 
								   },
								params:{Fun:'icmPageAction'}
								});
			   listform.submit();
	 }
		</script>   
        <style type="text/css">
<!--
.STYLE3 {font-size: 14px}
-->
        </style>
    </head>
    
    <body bgcolor="#F0F0F0" text="#000000" oncontextmenu="return false" topmargin="0" leftmargin="0">
        <form name="listform" action="/icm/main.xp" method="POST">
		   
            <table width="100%" border="0" cellspacing="0" cellpadding="4">
                <tr>
                  <td width="22%">&nbsp;</td>
                  <td colspan="3">&nbsp;</td>
                </tr>
                <tr>
                  <td colspan="4">&nbsp;</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td colspan="3">&nbsp;</td>
                </tr>
                <tr>
                  <td height="52" colspan="4"><div align="center"><table width="95%" height="0%" border="0" align="center" bordercolor="#FFFFFF" bgcolor="#CCCCCC"><tr><td width="100%"></td></tr></table></div></td>
                </tr>
                <tr>
                  <td colspan="4"><div align="center"><span class="STYLE3"><strong>数据保存时间设置(DAY)</strong>:</span></div></td>
                </tr>
                <tr>
                  <td><div align="right"></div></td>
                  <td colspan="3">&nbsp;</td>
                </tr>
                <tr>
                    <td> <div align="right"><span class="STYLE3">上线记录保存天数:</span></div></td>
                    <td colspan="3"><input type="text" id="onlineRecord" name="onlineRecord" size="20" maxlength="20" class=input></td>
                </tr>
                <tr><td><div align="right"><span class="STYLE3">系统信息报表数据保存天数:</span></div></td>
                    <td colspan="3"><input type="text" id="sysInfo" name="sysInfo" size="20" maxlength="18" class=input></td>
                </tr>
                <tr><td><div align="right"><span class="STYLE3">Arp报警列表保存时间:</span></div></td>
                    <td colspan="3"><input type="text" id="AlertList" name="AlertList" size="20" maxlength="20" class=input></td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td width="7%"><input type="hidden" name="Fun" value="icmAdminAction" >
                    <input type="hidden" name="actiontype" value="1" ></td>
                  <td width="7%"><input name="button" type="button" class=input onClick="msasUpdate();" value="确定配置" size=10></td>
                  <td width="64%">&nbsp;</td>
                </tr>
                <tr>
                 <td height="52" colspan="4"><div align="center">
                   <div align="center">
                     <table width="95%" height="0%" border="0" align="center" bordercolor="#FFFFFF" bgcolor="#CCCCCC">
                       <tr>
                         <td width="100%"></td>
                       </tr>
                     </table>
                   </div>
                 </div></td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td colspan="3">&nbsp;</td>
                </tr>
                <tr><td colspan="4">
                        <div align="left"></div>
                    </td>
                </tr>
            </table>
			
        </form>
    </body>

</html>