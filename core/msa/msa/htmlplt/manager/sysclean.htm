<HTML><HEAD><TITLE>网络7层管理和过滤的领导者</TITLE>
<META content="text/html; charset=utf-8" http-equiv=Content-Type>
<LINK rel=stylesheet type=text/css href="/ext/resources/css/ext-all.css">
<LINK rel=stylesheet type=text/css href="/ext/resources/css/xtheme-default.css">
<SCRIPT type=text/javascript src="/ext/adapter/ext/ext-base.js"></SCRIPT>
<SCRIPT type=text/javascript  src="/ext/ext-all.js"></SCRIPT>
<SCRIPT type=text/javascript  src="/msa/publicjs/pubstyle.js"></SCRIPT>
<link rel="stylesheet" type="text/css" href="/msa/publiccss/pubcss.css">
<link rel="stylesheet" href="/msa/publiccss/css.css" type="text/css">
<script type=text/javascript  src="/msa/publicjs/select_time_st_1.js"></script>
<script type="text/javascript">
function checkUser(){
	if(form1.b4.checked==true){
		form1.chr38.checked=true;
		form1.chr39.checked=true;
		form1.chr40.checked=true;
	}else{
		form1.chr38.checked=false;
		form1.chr39.checked=false;
		form1.chr40.checked=false;
	}
}
function checkPolicy(){
	if(form1.b5.checked==true){
		form1.chr41.checked=true;
		form1.chr42.checked=true;
		form1.chr43.checked=true;
		form1.chr44.checked=true;
		form1.chr45.checked=true;
		form1.chr46.checked=true;
	}else{
		form1.chr41.checked=false;
		form1.chr42.checked=false;
		form1.chr43.checked=false;
		form1.chr44.checked=false;
		form1.chr45.checked=false;
		form1.chr46.checked=false;
	}
}
function checkReport(){
	if(form1.b1.checked==true){
		form1.chr4.checked=true;
		form1.chr5.checked=true;
		form1.chr6.checked=true;
		form1.chr7.checked=true;
		form1.chr8.checked=true;
		form1.chr9.checked=true;
		form1.chr10.checked=true;
		form1.chr11.checked=true;
		form1.chr12.checked=true;
		form1.chr13.checked=true;
		form1.chr14.checked=true;
	}else{
		form1.chr4.checked=false;
		form1.chr5.checked=false;
		form1.chr6.checked=false;
		form1.chr7.checked=false;
		form1.chr8.checked=false;
		form1.chr9.checked=false;
		form1.chr10.checked=false;
		form1.chr11.checked=false;
		form1.chr12.checked=false;
		form1.chr13.checked=false;
		form1.chr14.checked=false;
	}
}

function checkReportData(){
	if(form1.b6.checked==true){
		form1.chr18.checked=true;
		form1.chr24.checked=true;
		form1.chr25.checked=true;
		form1.chr29.checked=true;
		form1.chr30.checked=true;
	}else{
		form1.chr18.checked=false;
		form1.chr24.checked=false;
		form1.chr25.checked=false;
		form1.chr29.checked=false;
		form1.chr30.checked=false;
	}
}

function checkManager(){
	if(form1.b2.checked==true){
		form1.chr15.checked=true;
		form1.chr16.checked=true;
		form1.chr17.checked=true;
		form1.chr19.checked=true;
		form1.chr20.checked=true;
		form1.chr22.checked=true;
		form1.chr23.checked=true;
	}else{
		form1.chr15.checked=false;
		form1.chr16.checked=false;
		form1.chr17.checked=false;
		form1.chr19.checked=false;
		form1.chr20.checked=false;
		form1.chr22.checked=false;
		form1.chr23.checked=false;
	}
}
function checkData(){
	if(form1.b3.checked==true){
		form1.chr27.checked=true;
		form1.chr28.checked=true;
		form1.chr31.checked=true;
		form1.chr32.checked=true;
		form1.chr33.checked=true;
		form1.chr34.checked=true;
		form1.chr35.checked=true;
		form1.chr36.checked=true;
		form1.chr37.checked=true;
	}else{
		form1.chr27.checked=false;
		form1.chr28.checked=false;
		form1.chr31.checked=false;
		form1.chr32.checked=false;
		form1.chr33.checked=false;
		form1.chr34.checked=false;
		form1.chr35.checked=false;
		form1.chr36.checked=false;
		form1.chr37.checked=false;
	}
}

function syscleanfun(){
	var mychr4,mychr5,mychr6,mychr7,mychr8,mychr9,mychr10,mychr11,mychr12,mychr13,mychr14;
	var mychr15,mychr16,mychr17,mychr18,mychr19,mychr20,mychr21,mychr22,mychr23,mychr24,mychr25;
	var mychr27,mychr28,mychr29,mychr30,mychr31,mychr32,mychr33,mychr34,mychr35,mychr36,mychr37;
	var mychr38,mychr39,mychr40;
	var mychr41,mychr42,mychr43,mychr44,mychr45,mychr46;
	var mysdate;
	
	if(form1.chr4.checked){
		mychr4=1;
	}else{
		mychr4=0;
	}
	
	if(form1.chr5.checked){
		mychr5=1;
	}else{
		mychr5=0;
	}

	if(form1.chr6.checked){
		mychr6=1;
	}else{
	  mychr6=0;
	}
	
	if(form1.chr7.checked){
		mychr7=1;
	}else{
		mychr7=0;
	}
	
	if(form1.chr8.checked){
		mychr8=1;
	}else{
		mychr8=0;
	}
	
	if(form1.chr9.checked){
		mychr9=1;
	}else{
		mychr9=0;
	}
	
	if(form1.chr10.checked){
		mychr10=1;
	}else{
		mychr10=0;
	}
	
	if(form1.chr11.checked){
		mychr11=1;
	}else{
		mychr11=0;
	}
	
	if(form1.chr12.checked){
		mychr12=1;
	}else{
		mychr12=0;
	}
	
	if(form1.chr13.checked){
		mychr13=1;
	}else{
		mychr13=0;
	}
	
	if(form1.chr14.checked){
		mychr14=1;
	}else{
		mychr14=0;
	}
   
  if(form1.chr15.checked){
		mychr15=1;
	}else{
		mychr15=0;
	}
	
	if(form1.chr16.checked){
		mychr16=1;
	}else{
		mychr16=0;
	}
	

	if(form1.chr17.checked){
		mychr17=1;
	}else{
		mychr17=0;
	}
	
  if(form1.chr18.checked){
		mychr18=1;
	}else{
		mychr18=0;
	}
	
	if(form1.chr19.checked){
		mychr19=1;
	}else{
		mychr19=0;
	}
	
  if(form1.chr20.checked){
		mychr20=1;
	}else{
		mychr20=0;
	}
	
	if(form1.chr21.checked){
		mychr21=1;
	}else{
		mychr21=0;
	}
	
	
	if(form1.chr22.checked){
		mychr22=1;
	}else{
		mychr22=0;
	}
	
	if(form1.chr23.checked){
		mychr23=1;
	}else{
		mychr23=0;
	}
	
	if(form1.chr24.checked){
		mychr24=1;
	}else{
		mychr24=0;
	}
	
	if(form1.chr25.checked){
		mychr25=1;
	}else{
		mychr25=0;
	}
	
	
	
	if(form1.chr27.checked){
		mychr27=1;
	}else{
		mychr27=0;
	}
	
	if(form1.chr28.checked){
		mychr28=1;
	}else{
		mychr28=0;
	}
	
	if(form1.chr29.checked){
		mychr29=1;
	}else{
		mychr29=0;
	}
	
	if(form1.chr30.checked){
		mychr30=1;
	}else{
		mychr30=0;
	}
	
	if(form1.chr31.checked){
		mychr31=1;
	}else{
		mychr31=0;
	}
	
	if(form1.chr32.checked){
		mychr32=1;
	}else{
		mychr32=0;
	}
	
	if(form1.chr33.checked){
		mychr33=1;
	}else{
		mychr33=0;
	}
	
	if(form1.chr34.checked){
		mychr34=1;
	}else{
		mychr34=0;
	}
	
	if(form1.chr35.checked){
		mychr35=1;
	}else{
		mychr35=0;
	}
	
	if(form1.chr36.checked){
		mychr36=1;
	}else{
		mychr36=0;
	}
	
	if(form1.chr37.checked){
		mychr37=1;
	}else{
		mychr37=0;
	}
	
	if(form1.chr38.checked){
		mychr38=1;
	}else{
		mychr38=0;
	}
	
	if(form1.chr39.checked){
		mychr39=1;
	}else{
		mychr39=0;
	}
	
	if(form1.chr40.checked){
		mychr40=1;
	}else{
		mychr40=0;
	}
	
	if(form1.chr41.checked){
		mychr41=1;
	}else{
		mychr41=0;
	}
	
	if(form1.chr42.checked){
		mychr42=1;
	}else{
		mychr42=0;
	}
	
	if(form1.chr43.checked){
		mychr43=1;
	}else{
		mychr43=0;
	}
	
	if(form1.chr44.checked){
		mychr44=1;
	}else{
		mychr44=0;
	}
	
	if(form1.chr45.checked){
		mychr45=1;
	}else{
		mychr45=0;
	}
	
	if(form1.chr46.checked){
		mychr46=1;
	}else{
		mychr46=0;
	}
	
  mysdate=form1.sdate.value;
  if(form1.b3.checked||form1.chr27.checked||form1.chr28.checked||form1.chr31.checked||form1.chr32.checked||form1.chr33.checked||form1.chr34.checked||form1.chr35.checked||form1.chr36.checked||form1.chr37.checked){
	  if(mysdate==""){
	  	Ext.MessageBox.alert('提示', '清空数据中心之前请选择日期以防误删数据'); 
	  	return false;
	  }
	}


	Ext.MessageBox.confirm('提示','你确定清空系统数据吗？这些数据一旦清空，将无法恢复。',function(button,text){
		   if (button == 'yes'){
		       Ext.Ajax.request({
				   method: 'POST',
				   url: '/msa/main.xp',
				   success: function(response, options) {
   			     Ext.MessageBox.show({
               msg: '清空系统数据',
               progressText: '正在清空系统数据....',
               width: 450,
               wait: true,
               progress: true,
               waitConfig: {
                 interval: 1000
               },
               icon: 'ext-mb-download'
             });
             var  iii;                
             iii=0;
             var task = {
					       run: function(){
				            Ext.Ajax.request({
                        method: 'POST',
                        url: '/msa/main.xp',
                        success: function(response, options) {                      	  
                        	   var retxt=response.responseText;	  
													   if(retxt.substring(0,1)=='0') {							             	                                
	                               runner.stop(task);
	                               Ext.MessageBox.hide();  
	                               Ext.MessageBox.alert('提示', '数据清除成功!'); 
										         }else{
										         	   iii++;
										         	   Ext.MessageBox.updateProgress(iii/1000,retxt+"清空成功!","数据正在清空中,请耐心等待...");	
//										         	   var f=function(v){
//										                return function(){
//										                 if(v!=12){						                 	
//				                                 var i=v/11; 
//										                     Ext.MessageBox.updateProgress(i,retxt+"清空成功!","数据正在清空中,请耐心等待...");		                  
//		  								               }else{
//		  								               	   Ext.MessageBox.hide();
//		  								               }
//										                }
//								                 }                          
//															   for(var i=1;i<13;i++){
//															    setTimeout(f(i),i*1000);
//															   } 
										         } 							                   							                                   	                                 								                						             							              							              					                							               
                        },
                        failure: function() {
                            runner.stopAll();
                            Ext.MessageBox.hide();
                            Ext.MessageBox.alert('提示', '数据清空失败!');
                        },
                        params:{
                            Fun: 'msaStatusAction'
                        }
				            });
					       },
					       interval:1000
						 };
						 
						 runner = new Ext.util.TaskRunner();
						 runner.start(task);  					 
						  
						       
		       },
		       failure: function(){
		           Ext.MessageBox.hide();
		           Ext.MessageBox.alert('提示', '数据清空失败!');
		       },
		       params: {
		           Fun: 'msaCleanAction',
			           chr4:mychr4,//自动生成报告列表 
			           chr5:mychr5,//手动生成报告列表 
			           chr6:mychr6,//每天汇总报告列表
			           chr7:mychr7,//出口流量报告列表 
			           chr8:mychr8,//服务协议报告列表 
			           chr9:mychr9,//用户时间报告列表
			           chr10:mychr10,//网络流量报告列表 
			           chr11:mychr11,//网络次数报告列表 
			           chr12:mychr12,//网站分析报告列表
			           chr13:mychr13,//用户计费报告列表 
			           chr14:mychr14,//自定义报告模板 
			           chr15:mychr15,//操作日志     
			           chr16:mychr16,//网络对象
			           chr17:mychr17,//端口属性
			           chr18:mychr18,//系统参数
			           chr19:mychr19,//邮件分类
			           chr20:mychr20,//表单分类
			           chr21:mychr21,//时间策略
			           chr22:mychr22,//法定假日 
			           chr23:mychr23,//自定义服务
			           chr24:mychr24,//时间服务
			           chr25:mychr25,//时间服务
			           chr27:mychr27,//服务访问记录
			           chr28:mychr28,//服务阻断记录 
			           chr29:mychr29,//服务汇总 
			           chr30:mychr30,//HTTP汇总 
			           chr31:mychr31,//即时通信 
			           chr32:mychr32,//虚拟身份
			           chr33:mychr33,//文件传输 
			           chr34:mychr34,//搜索关键字 
			           chr35:mychr35,//POP3/STMP邮件检索 
			           chr36:mychr36,//Web邮件检索 
			           chr37:mychr37,//表单内容检索
			           chr38:mychr38,//部门
			           chr39:mychr39,//策略
			           chr40:mychr40,//用户
			           chr41:mychr41,//动态列表
			           chr42:mychr42,//Qos通道
			           chr43:mychr43,//虚拟身份过滤清单
			           chr44:mychr44,//静态列表 
			           chr45:mychr45,//安全策略 
			           chr46:mychr46,//关键字
			           sdate:mysdate
		       }
		     });
		    }												  	
	})
}

</SCRIPT>
<style type="text/css">
<!--
body {font-size: 12pt}
table {font-size: 9pt}
form {margin: 0px;}
-->
</style>
</head>
<body oncontextmenu="return false" bgcolor="#F0F0F0"  topmargin="0" text="#000000" leftmargin="0"  style="SCROLLBAR-FACE-COLOR: #f0f0f0;  overflow-x:hidden;  OVERFLOW: scroll; SCROLLBAR-SHADOW-COLOR: #f0f0f0; SCROLLBAR-3DLIGHT-COLOR: #f0f0f0; SCROLLBAR-ARROW-COLOR: #f0f0f0; SCROLLBAR-DARKSHADOW-COLOR: #cccccc;">
<table width="100%" border="0" cellspacing="0" cellpadding="0" > 
  <form name="form1" id="form1" method="post"  action="/msa/main.xp" >  
			<input type="hidden" name="dfd1" value="0">	
			<input type="hidden" name="dfd2" value="0">	
			<input type="hidden" name="dfd3" value="0">	
			<input type="hidden" name="dfd4" value="0">	
			<input type="hidden" name="dfd5" value="0"> 
		    <table width="100%" border="0" cellspacing="0" cellpadding="0" >
						<TR>
						<TD>
								<fieldset style="width:520;height:30;border:2px groove" align=center>
							  <legend><input type="checkbox" name="b4" value="0" class="inputchk" onClick="checkUser()">清空账户中心</legend> 
							    <table>
							    	<tr>
							    	<td>
											<input type="checkbox" name="chr38" value="38" >部门信息
										  <input type="checkbox" name="chr39" value="39" >策略信息
											<input type="checkbox" name="chr40" value="40" >用户信息
										</td>
										</tr>
									</table>
								</fieldset>
					  </TD>
					  <td  height="35">&nbsp;</td> 
					  </TR>
					  
					  <TR>
						<td>
								<fieldset style="width:520;height:30;border:2px groove" align=center>
							  <legend>
							  	<input type="checkbox" name="b3" value="0" class="inputchk" onClick="checkData()">清空数据中心</legend> 
							    <table>
							    	<tr>
											<td align="left">
											选择清空时间范围:<input type="text" id="sdate" class=inputf0 name="sdate" size="10" maxlength="12" readonly="true" value="[$date$]" onfocus=setday(sdate)>前数据 >
											</td>
										</tr>
							    	<tr>
							    	<td>
											<input type="checkbox" name="chr27" value="27" >数据中心存储
										  <input type="checkbox" name="chr31" value="31" >即时通信
											<input type="checkbox" name="chr32" value="32" >虚拟身份
											<input type="checkbox" name="chr33" value="33" >文件传输
										  <input type="checkbox" name="chr34" value="34" >搜索关键字
										</td>
										</tr>
							    	<tr>
							    	<td>
											
											<input type="checkbox" name="chr35" value="35" >POP3/STMP邮件
											<input type="checkbox" name="chr36" value="36" >Web邮件
										  <input type="checkbox" name="chr37" value="37" >表单内容
										  <input type="checkbox" name="chr28" value="28" >微博贴吧内容
										</td>
										</tr>
										
									</table>
								</fieldset>
					  </td>
					  <td  height="35">&nbsp</td>
					  </TR>
					  
						<TR>
						<td>
								<fieldset style="width:520;height:30;border:2px groove" align=center>
							  <legend><input type="checkbox" name="b5" value="0" class="inputchk" onClick="checkPolicy()">清空策略中心</legend> 
							    <table>
							    	<tr>
							    	<td>
											<input type="checkbox" name="chr41" value="41" >动态规则
										  <input type="checkbox" name="chr42" value="42" >静态规则
											<input type="checkbox" name="chr43" value="43" >用户属性
										</td>
										</tr>
							    	<tr>
							    	<td>
											<input type="checkbox" name="chr44" value="44" >关键字规则
										  <input type="checkbox" name="chr45" value="45" >虚拟身份规则
											<input type="checkbox" name="chr46" value="46" >Qos通道
										</td>
										</tr>
									</table>
								</fieldset>
					  </td>
					  <td  height="35">&nbsp</td> 
					  </TR>
					  
					  
						<TR>
						<td>
								<fieldset style="width:520;height:30;border:2px groove" align=center>
							  <legend><input type="checkbox" name="b1" value="0" class="inputchk" onClick="checkReport()">清空报表中心</legend> 
							    <table>
							    	<tr>
							    	<td>
											<input type="checkbox" name="chr4" value="4" >自动生成报告列表
										  <input type="checkbox" name="chr5" value="5" >手动生成报告列表
											<input type="checkbox" name="chr6" value="6" >每天汇总报告列表
										</td>
										</tr>
							    	<tr>
							    	<td>
											<input type="checkbox" name="chr7" value="7" >出口流量报告列表
										  <input type="checkbox" name="chr8" value="8" >服务协议报告列表
											<input type="checkbox" name="chr9" value="9" >用户时间报告列表
										</td>
										</tr>
							    	<tr>
							    	<td>
											<input type="checkbox" name="chr10" value="10" >网络流量报告列表
										  <input type="checkbox" name="chr11" value="11" >网络次数报告列表
											<input type="checkbox" name="chr12" value="12" >网站分析报告列表
										</td>
										</tr>
							    	<tr>
							    	<td>
											<input type="checkbox" name="chr13" value="13" >用户计费报告列表
										  <input type="checkbox" name="chr14" value="14" >自定义报告模板
										</td>
										</tr>
									</table>
								</fieldset>
					  </td>
					  <td  height="35">&nbsp</td>
					  </TR>
					  
					  
						<TR>
						<td>
								<fieldset style="width:520;height:30;border:2px groove" align=center>
							  <legend><input type="checkbox" name="b2" value="0" class="inputchk" onClick="checkManager()">清空管理中心</legend> 
							    <table>
							    	<tr>
							    	<td>
											<input type="checkbox" name="chr15" value="15" >操作日志
										  <input type="checkbox" name="chr16" value="16" >网络对象
											<input type="checkbox" name="chr17" value="17" >端口属性
										  <input type="checkbox" name="chr19" value="19" >邮件分类
										</td>
										</tr>
							    	<tr>
							    	<td>
											<input type="checkbox" name="chr20" value="20" >表单分类
										  <input type="checkbox" name="chr21" value="21" >时间策略
											<input type="checkbox" name="chr22" value="22" >节假日
											<input type="checkbox" name="chr23" value="23" >自定义报告
										</td>
										</tr>
									</table>
								</fieldset>
					  </td>
					  <td  height="35">&nbsp</td>
					  </TR>
					  
					  <TR>
						<td>
								<fieldset style="width:520;height:30;border:2px groove" align=center>
							  <legend>
							  	<input type="checkbox" name="b6" value="0" class="inputchk" onClick="checkReportData()">清空报告原始数据</legend> 
							    <table>
							    	<tr>
							    	<td>
											<input type="checkbox" name="chr29" value="29" >日汇总
											<input type="checkbox" name="chr30" value="30" >周汇总
											<input type="checkbox" name="chr18" value="18" >月汇总
											<input type="checkbox" name="chr25" value="25" >年汇总
											<input type="checkbox" name="chr24" value="24" >其他报告数据
										</td>
										</tr>
									</table>
								</fieldset>
					  </td>
					  <td  height="35">&nbsp</td>
					  </TR>
					  
						
					   
					  <TR>
						<td>
							<fieldset style="width:520;height:30;border:2px groove" align=center>
							<input type="button"  border="0"  class=inputf0 value="确认清空" onClick="syscleanfun()"
							</fieldset>
					  </td>
					  <td  height="35">&nbsp</td>
					  </TR>
					  
		    </table>
	</form>
</table>
</body>
</html>
